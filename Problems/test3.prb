CONFIG{defaultUnits = [[iI:A][vV:V][rR:\Omega]]}
PARAM{V_ov=0.2}
PARAM{lambda=0.2#units=V^{-1},symbol=\lambda}
PARAM{I_D1=100e-6}
RUN{I_D2=I_D1#fmt=silent}
RUN{I_D3=I_D1#fmt=silent}
RUN{V_ov1=V_ov#fmt=silent}
RUN{V_ov2=V_ov#fmt=silent}
RUN{V_ov3=V_ov#fmt=silent}
For the circuit shown below...

1. Find $v_1/v_i$ and $v_o/v_1$ then multiply the two results to obtain $v_o/v_i$

2. Find $R_{out}$ and the short circuit output current, $i_{sco}/v_i$, then multiply the two results to obtain $v_o/v_i$.  Compare with (a).  (When finding $i_{sco}/v_i$, since $g_mr_o \gg 1$, assume $r_o \rightarrow \infty$.)

BEGIN{SOLUTION}
-----
* Solution
First we find $g_m$ and $r_o$ for the transistors
$$RUN{g_m1=2*I_D1/V_ov#units=A/V}$$
$$RUN{r_o1=1/(lambda*I_D1)}$$
and since $V_{ov}$ and $I_D$ is the same for all transistors, therefore
$g_{m2}=g_{m3}=g_{m1}$
RUN{g_m2=g_m1#fmt=silent}
Also, since all transistors have the same $I_D$ and $\lambda$, therefore
$r_{o2}=r_{o3}=r_{o1}$.
RUN{r_o2=r_o1#fmt=silent}
RUN{r_o3=r_o1#fmt=silent}

(a)
For $v_1/v_i$, we have the following circuit
$$v_1/v_i = (i_{sc1}/v_i)\times R_{o1}$$
$$RUN{isc1vi=-g_m1#units=A/V,symbol=i_{sc1}/v_i}$$
$$RUN{R_x2=(1/g_m2)+(r_o3/(g_m2*r_o2))}$$
$$RUN{R_o1=PARLL(R_x2,r_o1)}$$
$$RUN{v1vi=isc1vi*R_o1#units=V/V,symbol=v_1/v_i}$$

For $v_o/v_1$, we have the following circuit

Since $v_1$ is small-signal ground
$$RUN{R_oy=r_o2}$$
$$RUN{R_ox=PARLL(R_oy,r_o3)}$$
$$RUN{iscoxvi=g_m2#units=A/V,symbol=i_{scox}/v_i}$$
$$RUN{vov1=(iscoxvi)*R_ox#units=V/V,symbol=v_o/v_1}$$

Finally,
$$RUN{vovia=(v1vi)*(vov1)#units=V/V,symbol=v_o/v_i}$$

(b)
For $R_{out}$, it can be found by inspection as $r_{o3}$ in parallel with the resistance looking into the drain of $M_2$ (see original circuit schematic) 
$$RUN{R_out=PARLL(r_o3,((1+g_m2*r_o1)*r_o2))}$$

For the short circuit output current, $i_{sco}$, the current from the drain of $M_1$ will split between going into the source of $M_2$ and $r_{o1}$.  Since the output is grounded, the impedance looking into the source of $M_2$ is $1/g_{m2}$.  As a result, there is a current divider of $r_{o2}/(r_{o2}+1/g_{m2})$ resulting in
$$RUN{iscovi=-g_m1*(r_o1/(r_o1+1/g_m2))#units=A/V,symbol=i_{sco}/v_i}$$
$$RUN{vovib=(iscovi)*R_out#units=V/V,symbol=v_o/v_i}$$

This evaluation method gives us the same result as part(a) 
-----
END{SOLUTION}
BEGIN{ANSWER}
-----
* Answer
(a) $VAL{v1vi,=}; VAL{vov1,=}; VAL{vovia,=}$

(b) $VAL{R_out,=}; VAL{vovib,=}$
END{ANSWER}